(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6050],{10867:function(e,t,n){"use strict";n.d(t,{Tg:function(){return s}});var r=n(97142),i=n(65648),o=n(85893),s=function(e){return(0,r.C)(i.uu).filter((function(t){return e.includes(t)})).length>0};t.ZP=function(e){var t=e.scopes,n=e.children;return s(t)?(0,o.jsx)(o.Fragment,{children:n}):null}},62542:function(e,t,n){"use strict";var r=n(59499),i=n(16835),o=n(27812),s=n(81655),c=n(15193),a=n(48591),u=n(68527),l=n(47398),d=n(67294),p=n(85893);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t,n=e.disabled,r=void 0!==n&&n,f=e.enableSorting,x=void 0===f||f,v=e.hasClear,j=void 0===v||v,m=e.label,b=e.list,g=e.menuButtonProps,y=e.onChange,O=e.selectedValue,S=(0,d.useState)(!1),C=S[0],w=S[1],P=function(){w(!1)},Z=null===(t=(0,o.Z)(b).find((function(e){return(0,i.Z)(e,2)[1].value===O})))||void 0===t?void 0:t[0];return(0,p.jsxs)(s.v2,{isLazy:!0,onClose:P,onOpen:function(){w(!0)},strategy:"fixed",children:[(0,p.jsx)(s.j2,h(h({"aria-label":null!==Z&&void 0!==Z?Z:m,as:c.zx,color:Z?"complimentary.500":void 0,disabled:r,fontWeight:"normal",rightIcon:(0,p.jsx)(a.mC,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"}},g),{},{"data-testid":"select-dropdown-btn",children:(0,p.jsx)(u.xv,{isTruncated:!0,children:null!==Z&&void 0!==Z?Z:m})})),C?(0,p.jsxs)(s.qy,{lineHeight:"1rem",p:"0","data-testid":"select-dropdown-list",children:[j&&(0,p.jsx)(u.kC,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:(0,p.jsx)(c.zx,{onClick:function(){y(void 0),P()},size:"xs",variant:"outline",children:"Clear"})}),(x?(0,o.Z)(b).sort():(0,o.Z)(b)).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return(0,p.jsx)(l.u,{"aria-label":r.toolTip,hasArrow:!0,label:r.toolTip,placement:"auto-start",openDelay:500,shouldWrapChildren:!0,children:(0,p.jsx)(s.sN,{color:O===r.value?"complimentary.500":void 0,isDisabled:r.isDisabled,onClick:function(){return y(r.value)},paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,p.jsx)(u.xv,{fontSize:"0.75rem",children:n})})},n)}))]}):null]})}},10846:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Vo:function(){return p},t5:function(){return d}});var r=n(59499),i=n(68527),o=n(85893);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,o.jsx)(a,{message:e});return c(c({},l),{description:t})},p=function(e){var t=(0,o.jsx)(u,{message:e});return c(c({},l),{description:t,status:"error"})}},91023:function(e,t,n){"use strict";var r=n(68527),i=n(85130),o=n(41664),s=n.n(o),c=(n(67294),n(85893));t.Z=function(e){var t=e.items;return(0,c.jsx)(r.MI,{columns:4,spacingX:"16px",spacingY:"16px",children:t.map((function(e){return(0,c.jsx)(s(),{href:{pathname:window.location.pathname,query:{step:2,connectorType:JSON.stringify(e)}},passHref:!0,children:(0,c.jsx)(r.xu,{boxShadow:"base",borderRadius:"5px",maxWidth:"331px",overflow:"hidden",_hover:{boxShadow:"lg",cursor:"pointer"},"data-testid":"".concat(e.identifier,"-item"),children:(0,c.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",pl:"24px",color:"gray.700",fontSize:"14px",fontStyle:"normal",fontWeight:"600",lineHeight:"20px",h:"80px",children:[(0,c.jsx)(i.Z,{data:e}),(0,c.jsx)(r.xv,{ml:"12px",children:e.human_readable})]})})},e.identifier)}))})}},89681:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r=n(68527),i=n(62254),o=n(85130),s=n(11163),c=n(67294),a=n(2664),u=n(97142),l=n(27812),d=n(4612),p=n(48591),f=n(15193),h=n(49609),x=n(73662),v=n(10867),j=n(59499),m=n(50029),b=n(16835),g=n(87794),y=n.n(g),O=n(28609),S=n(43871),C=n(32512),w=n(65698),P=n(10846),Z=n(20095),k=n(61876),T=n(18459),E=n(60443),D=((0,k.createSlice)({name:"connectorTemplate",initialState:{},reducers:{}}).reducer,E.u.injectEndpoints({endpoints:function(e){return{registerConnectorTemplate:e.mutation({query:function(e){var t=new FormData;return t.append("file",e),{url:"".concat(T.o4,"/register"),method:"POST",body:t}}})}}}).useRegisterConnectorTemplateMutation),I=n(85893);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,j.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){var t=e.isOpen,n=e.onClose,i=e.testId,o=void 0===i?"connector-template-modal":i,s=(0,a.useDispatch)(),u=(0,c.useState)(null),l=u[0],d=u[1],p=(0,O.pm)(),h=(0,C.uI)({onDrop:function(e){var t;"zip"===(null===(t=e[0].name.split(".").pop())||void 0===t?void 0:t.toLowerCase())?d(e[0]):p((0,P.Vo)("Only zip files are allowed."))}}),x=h.getRootProps,v=h.getInputProps,j=h.isDragActive,g=D(),k=(0,b.Z)(g,2),T=k[0],E=k[1].isLoading,_=(0,Z.$I)({search:""},{skip:!1}).refetch,z=function(){var e=(0,m.Z)(y().mark((function e(){var t,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=19;break}return e.prev=1,e.next=4,T(l).unwrap();case 4:return p((0,P.t5)("Connector template uploaded successfully.")),e.next=7,_();case 7:r=e.sent,i=r.data,s((0,Z.fP)(null!==(t=null===i||void 0===i?void 0:i.items)&&void 0!==t?t:[])),n(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),p((0,P.Vo)((0,w.e$)(e.t0)));case 16:return e.prev=16,d(null),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return(0,I.jsxs)(S.u_,{isOpen:t,onClose:n,size:"2xl",children:[(0,I.jsx)(S.ZA,{}),(0,I.jsxs)(S.hz,{textAlign:"left",p:2,"data-testid":o,children:[(0,I.jsx)(S.xB,{children:"Upload connector template"}),(0,I.jsxs)(S.fe,{children:[(0,I.jsx)(r.xv,{fontSize:"sm",mb:4,children:"Drag and drop your connector template zip file here, or click to browse your files."}),(0,I.jsxs)(r.xu,A(A({},x()),{},{bg:j?"gray.100":"gray.50",border:"2px dashed",borderColor:j?"gray.300":"gray.200",borderRadius:"md",cursor:"pointer",minHeight:"150px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,I.jsx)("input",A({},v())),l?(0,I.jsx)(r.xv,{children:l.name}):j?(0,I.jsx)(r.xv,{children:"Drop the file here..."}):(0,I.jsx)(r.xv,{children:"Click or drag and drop your file here."})]})),(0,I.jsx)(r.xv,{fontSize:"sm",mt:4,children:"A connector template zip file must include a SaaS config and dataset, but may also contain an icon (.svg) and custom functions (.py) as optional files."})]}),(0,I.jsx)(S.mz,{children:(0,I.jsxs)(f.hE,{size:"sm",spacing:"2",width:"100%",display:"flex",justifyContent:"right",children:[(0,I.jsx)(f.zx,{variant:"outline",onClick:n,"data-testid":"cancel-btn",isDisabled:E,children:"Cancel"}),(0,I.jsx)(f.zx,{colorScheme:"primary",type:"submit",isDisabled:!l||E,onClick:z,"data-testid":"submit-btn",children:"Submit"})]})})]})]})},N=n(53065),R=n(9613),M=n(62542),H=n(4043),q=function(e){var t=e.width,n=(0,a.useDispatch)(),o=(0,c.useRef)(!1),s=(0,u.C)(i.pw);return(0,c.useEffect)((function(){return o.current=!0,function(){n((0,i.zq)(H.gA)),o.current=!1}}),[n]),(0,I.jsx)(r.xu,{children:(0,I.jsx)(M.Z,{enableSorting:!1,hasClear:!1,label:"Show all connectors",list:H.yI,menuButtonProps:{width:t},onChange:function(e){n((0,i.zq)(e||H.gA))},selectedValue:s.system_type||H.gA})})},F=n(91023),U=function(){var e=(0,a.useDispatch)(),t=(0,c.useRef)(!1),n=(0,u.C)(i.ZZ).step,o=(0,u.C)(i.pw),s=(0,i.$I)(o),j=s.data,m=s.isFetching,b=s.isLoading,g=s.isSuccess,y=(0,c.useState)(!1),O=y[0],S=y[1],C=(0,c.useCallback)((function(t){(0===t.target.value.length||t.target.value.length>1)&&e((0,i.qP)(t.target.value))}),[e]),w=(0,c.useMemo)((function(){return(0,x.Ds)(C,250)}),[C]),P=(0,c.useMemo)((function(){return(null===j||void 0===j?void 0:j.items)&&(0,l.Z)(j.items).sort((function(e,t){return e.human_readable>t.human_readable?1:-1}))}),[j]);return(0,c.useEffect)((function(){return t.current=!0,function(){e((0,i.qP)("")),t.current=!1}}),[e]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(R.Z,{steps:[H.Ss[0],H.Ss[1]]}),(0,I.jsx)(r.kC,{minWidth:"fit-content",children:(0,I.jsx)(r.xu,{color:"gray.700",fontSize:"14px",maxHeight:"80px",maxWidth:"474px",mb:"24px",children:n.description})}),(0,I.jsxs)(r.kC,{alignItems:"center",gap:"4",mb:"24px",minWidth:"fit-content",children:[(0,I.jsx)(q,{}),(0,I.jsxs)(d.BZ,{size:"sm",children:[(0,I.jsx)(d.Z8,{pointerEvents:"none",children:(0,I.jsx)(p.PT,{color:"gray.300",h:"17px",w:"17px"})}),(0,I.jsx)(d.II,{autoComplete:"off",autoFocus:!0,borderRadius:"md",name:"search",onChange:w,placeholder:"Search Integrations",size:"sm",type:"search"})]}),(0,I.jsx)(v.ZP,{scopes:[N.Sh.CONNECTOR_TEMPLATE_REGISTER],children:(0,I.jsx)(f.zx,{colorScheme:"primary",type:"submit",minWidth:"auto","data-testid":"upload-btn",size:"sm",onClick:function(){S(!0)},children:"Upload connector"})})]}),(0,I.jsx)(z,{isOpen:O,onClose:function(){return S(!1)}}),(m||b)&&(0,I.jsx)(r.M5,{children:(0,I.jsx)(h.$,{})}),g&&P?(0,I.jsx)(F.Z,{items:P}):null]})},W=n(52313),L=n(74157),B=n(95693),G=n(98643),V=function(){var e=(0,a.useDispatch)(),t=(0,c.useRef)(!1),n=(0,c.useState)([H.Ss[0],H.Ss[1],H.Ss[2]]),o=n[0],s=n[1],l=(0,c.useState)(!1),d=l[0],p=l[1],f=(0,u.C)(i.ZZ),h=f.connection,x=f.connectionOption,v=H.IM.find((function(e){return e.type===(null===x||void 0===x?void 0:x.type)})),j=(0,c.useState)(null===v||void 0===v?void 0:v.options[0]),m=j[0],b=j[1],g=function(){p(!0)},y=(0,c.useMemo)((function(){return function(){var e=[];return null!==v&&void 0!==v&&v.options&&v.options.forEach((function(t){var n;switch(t){case H.H5.CONNECTOR_PARAMETERS:n={label:t,content:(0,I.jsx)(L.s,{onConnectionCreated:g})};break;case H.H5.DATASET_CONFIGURATION:n=null!==h&&void 0!==h&&h.key?{label:t,content:(0,I.jsx)(B.Z,{})}:void 0;break;case H.H5.DSR_CUSTOMIZATION:n=null!==h&&void 0!==h&&h.key?{label:t,content:(0,I.jsx)(G.Z,{})}:void 0}n&&e.push(n)})),e}}),[null===h||void 0===h?void 0:h.key,null===v||void 0===v?void 0:v.options]),O=(0,c.useCallback)((function(t){switch(t){case H.H5.DATASET_CONFIGURATION:case H.H5.DSR_CUSTOMIZATION:e((0,i.nj)(H.Ss[3])),s([H.Ss[0],H.Ss[1],H.Ss[3]]);break;case H.H5.CONNECTOR_PARAMETERS:default:e((0,i.nj)(H.Ss[2]))}b(t)}),[e]);return(0,c.useEffect)((function(){return t.current=!0,function(){t.current=!1,e((0,i.mc)())}}),[e]),(0,c.useEffect)((function(){null!==h&&void 0!==h&&h.key&&(O((null===x||void 0===x?void 0:x.type)!==N.Zi.MANUAL?H.H5.DATASET_CONFIGURATION:H.H5.DSR_CUSTOMIZATION),d&&p(!1))}),[d,null===h||void 0===h?void 0:h.key,null===x||void 0===x?void 0:x.type,null===v||void 0===v?void 0:v.options,O]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(R.Z,{steps:o}),(0,I.jsx)(r.gC,{alignItems:"stretch",gap:"18px",children:(0,I.jsx)(W.Z,{data:y(),flexGrow:1,index:null===v||void 0===v?void 0:v.options.findIndex((function(e){return e===m})),isLazy:!0})})]})},X=n(5404),$=function(){var e=(0,a.useDispatch)(),t=(0,s.useRouter)(),n=t.query,l=n.connectorType,d=n.step,p=(0,u.C)(i.ZZ),f=p.connection,h=p.connectionOption,x=p.step;(0,c.useEffect)((function(){if(l&&e((0,i.yA)(JSON.parse(l))),t.query.step){var n=H.Ss.find((function(e){return e.stepId===Number(d)}));e((0,i.nj)(n||H.Ss[1]))}return!t.query.id&&null!==f&&void 0!==f&&f.key&&(0,X.S)(f.key,x.href),function(){}}),[null===f||void 0===f?void 0:f.key,l,d,e,t.query.id,t.query.step,x.href]);var v=(0,c.useCallback)((function(e){var t="";switch(e.stepId){case 2:case 3:t=e.label.replace("{identifier}",h.human_readable);break;default:t=e.label}return t}),[h]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(r.X6,{fontSize:"2xl",fontWeight:"semibold",maxHeight:"40px",mb:"4px",whiteSpace:"nowrap",children:(0,I.jsxs)(r.xu,{alignItems:"center",display:"flex",children:[h&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o.Z,{data:h}),(0,I.jsx)(r.xv,{ml:"8px",children:v(x)})]}),!h&&(0,I.jsx)(r.xv,{children:v(x)})]})}),function(){switch(x.stepId){case 1:default:return(0,I.jsx)(U,{});case 2:case 3:return(0,I.jsx)(V,{})}}()]})},J=n(66752),Y=function(){return(0,I.jsx)(J.Z,{children:(0,I.jsx)($,{})})}},65068:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection/new",function(){return n(89681)}])}},function(e){e.O(0,[2437,4231,6114,6647,7826,2512,6459,9774,2888,179],(function(){return t=65068,e(e.s=t);var t}));var t=e.O();_N_E=t}]);