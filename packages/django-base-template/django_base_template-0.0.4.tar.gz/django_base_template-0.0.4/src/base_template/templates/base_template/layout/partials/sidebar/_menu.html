{% load i18n %}
<div class="app-sidebar-menu overflow-hidden flex-column-fluid">
  <div
      id="kt_app_sidebar_menu_wrapper"
      class="app-sidebar-wrapper hover-scroll-overlay-y my-5"
      data-kt-scroll="true"
      data-kt-scroll-activate="true"
      data-kt-scroll-height="auto"
      data-kt-scroll-dependencies="#kt_app_sidebar_logo, #kt_app_sidebar_footer"
      data-kt-scroll-wrappers="#kt_app_sidebar_menu"
      data-kt-scroll-offset="5px"
      data-kt-scroll-save-state="true">

    <div class="menu menu-column menu-rounded menu-sub-indention px-3" id="#kt_app_sidebar_menu" data-kt-menu="true"
         data-kt-menu-expand="false">

      {% for item in sidebar.menu %}
        {% if item.permissions %}
          <div data-kt-menu-trigger="click" class="menu-item menu-accordion{% if item.is_active %} here show{% endif %}">
            {% if item.url %}
              <div class="menu-item">
                <!--begin:Menu link-->
                <a class="menu-link{% if item.is_active %} active{% endif %}" href="{{ item.url }}">
                  <span class="menu-icon">
                    <i class="material-icons-outlined">{{ item.icon }}</i>
                  </span>
                  <span class="menu-title">{{ item.title }}</span>
                </a>
                <!--end:Menu link-->
              </div>
            {% else %}
              <span class="menu-link">
                <span class="menu-icon">
                  <i class="material-icons-outlined">{{ item.icon }}</i>
                </span>
                <span class="menu-title">{{ item.title }}</span>
                <span class="menu-arrow"></span>
              </span>
            {% endif %}

            {% if item.children|length > 0 %}
              <div class="menu-sub menu-sub-accordion">
                {% if item.children|length >= 4 %}
                  {% for child in item.children %}
                    {% if forloop.counter0 < 4 %}
                      <div class="menu-item">
                        <a class="menu-link{% if child.is_active %} active{% endif %}"
                            {% if child.comment %}
                           title="{{ child.comment }}"
                           data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click"
                           data-bs-placement="right"
                            {% endif %}
                           href="{{ child.url }}">
                          <span class="menu-bullet">
                            <span class="bullet bullet-dot"></span>
                          </span>
                          <span class="menu-title">{{ child.title }}</span>
                        </a>
                      </div>
                    {% endif %}
                  {% endfor %}

                  <div class="menu-inner flex-column collapse" id="{{ item.key }}">

                    {% for child in item.children %}
                      {% if forloop.counter0 >= 4 %}
                        <div class="menu-item">
                          <a class="menu-link{% if child.is_active %} active{% endif %}"
                              {% if child.comment %}
                             title="{{ child.comment }}"
                             data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click"
                             data-bs-placement="right"
                              {% endif %}
                             href="{{ child.url }}">
                      <span class="menu-bullet">
                        <span class="bullet bullet-dot"></span>
                      </span>
                            <span class="menu-title">{{ child.title }}</span>
                          </a>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>

                  <div class="menu-item">
                    <div class="menu-content">
                      <a class="btn btn-flex btn-color-primary d-flex flex-stack fs-base p-0 ms-2 mb-2 toggle collapsible collapsed"
                         data-bs-toggle="collapse" href="#{{ item.key }}"
                         data-kt-toggle-text="Show Less">
                        <span data-kt-toggle-text-target="true">Show 12 More</span>

                        <span class="svg-icon toggle-on svg-icon-2 me-0">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="5" fill="currentColor"></rect>
                          <rect x="6.0104" y="10.9247" width="12" height="2" rx="1" fill="currentColor"></rect>
                        </svg>
                      </span>
                        <span class="svg-icon toggle-off svg-icon-2 me-0">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="5" fill="currentColor"></rect>
                          <rect x="10.8891" y="17.8033" width="12" height="2" rx="1"
                                transform="rotate(-90 10.8891 17.8033)"
                                fill="currentColor"></rect>
                          <rect x="6.01041" y="10.9247" width="12" height="2" rx="1" fill="currentColor"></rect>
                        </svg>
                      </span>

                      </a>
                    </div>
                  </div>
                {% else %}
                  {% for child in item.children %}
                    <div class="menu-item">
                      <a class="menu-link{% if child.is_active %} active{% endif %}"
                          {% if child.comment %}
                         title="{{ child.comment }}"
                         data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-dismiss="click"
                         data-bs-placement="right"
                          {% endif %}
                         href="{{ child.url }}">
                        <span class="menu-bullet">
                          <span class="bullet bullet-dot"></span>
                        </span>
                        <span class="menu-title">{{ child.title }}</span>
                      </a>
                    </div>
                  {% endfor %}
                {% endif %}
              </div>
            {% endif %}

          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>
