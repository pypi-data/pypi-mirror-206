import{c as O,o as c,e as T,aD as Ce,r as re,w,aE as we,aF as W,aw as Ge,c8 as He,c9 as We,ca as Xe,bD as m,cb as be,T as Ye,cc as D,ag as ee,X as Qe,cd as Je,bH as Te,N as ie,ce as Ze,O as Ve,af as Pe,cf as et,U as de,bG as H,cg as tt,g as l,bg as ge,bh as at,ch as lt,bj as st,ci as ot,cj as rt,ck as _e,cl as nt,bQ as ut,bf as it,cm as dt,bV as ye,F as ce,bW as ct,at as se,J as mt,G as vt,cn as ht,a as Z,M as X,d as B,co as ft,aq as me,f as N,t as R,cp as pt,j as d,cq as bt,cr as gt,y as _t,k as j,E as oe,D as Re,aA as yt,q as Be,v as Ie,I as kt,cs as St,_ as Ne,bK as Ct,ct as wt,B as Tt,C as Vt,b8 as Pt,bN as Rt,b6 as Bt,b7 as It,cu as Nt,b1 as ue,b as ke,K as Mt,b0 as Ft,b4 as Lt,l as $t,aV as Dt,aB as Et}from"./admin-aeb3a60b.js";const At={name:"PaginationToolbar"};function zt(e,t,a,i,n,s){return c(),T(Ge,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Ce({_:2},[re(e.$slots,(r,o)=>({name:o,fn:w(h=>[we(e.$slots,o,W({props:r},h),void 0,!0)])}))]),1024)}const ll=O(At,[["render",zt],["__scopeId","data-v-cfa8cce0"]]);const ve=Symbol.for("vuetify:v-slider");function jt(e,t,a){const i=a==="vertical",n=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return i?s.clientY-(n.top+n.height/2):s.clientX-(n.left+n.width/2)}function Ot(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const qt=He({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...We(),...Xe({elevation:2})},"slider"),Ut=e=>{const t=m(()=>parseFloat(e.min)),a=m(()=>parseFloat(e.max)),i=m(()=>+e.step>0?parseFloat(e.step):0),n=m(()=>Math.max(be(i.value),be(t.value)));function s(r){if(i.value<=0)return r;const o=Te(r,t.value,a.value),h=t.value%i.value,v=Math.round((o-h)/i.value)*i.value+h;return parseFloat(Math.min(v,a.value).toFixed(n.value))}return{min:t,max:a,step:i,decimals:n,roundValue:s}},xt=e=>{let{props:t,steps:a,onSliderStart:i,onSliderMove:n,onSliderEnd:s,getActiveThumb:r}=e;const{isRtl:o}=Ye(),h=D(t,"reverse"),v=m(()=>{let u=o.value?"rtl":"ltr";return t.reverse&&(u=u==="rtl"?"ltr":"rtl"),u}),{min:y,max:I,step:g,decimals:F,roundValue:E}=a,q=m(()=>parseInt(t.thumbSize,10)),U=m(()=>parseInt(t.tickSize,10)),A=m(()=>parseInt(t.trackSize,10)),$=m(()=>(I.value-y.value)/g.value),x=D(t,"disabled"),K=m(()=>t.direction==="vertical"),f=m(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),V=m(()=>t.error||t.disabled?void 0:t.trackColor??t.color),L=m(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),S=ee(!1),k=ee(0),M=ee(),P=ee();function b(u){var pe;const _=t.direction==="vertical",je=_?"top":"left",Oe=_?"height":"width",qe=_?"clientY":"clientX",{[je]:Ue,[Oe]:xe}=(pe=M.value)==null?void 0:pe.$el.getBoundingClientRect(),Ke=Ot(u,qe);let ne=Math.min(Math.max((Ke-Ue-k.value)/xe,0),1)||0;return(_||v.value==="rtl")&&(ne=1-ne),E(y.value+ne*(I.value-y.value))}const Y=u=>{s({value:b(u)}),S.value=!1,k.value=0},Q=u=>{P.value=r(u),P.value&&(P.value.focus(),S.value=!0,P.value.contains(u.target)?k.value=jt(u,P.value,t.direction):(k.value=0,n({value:b(u)})),i({value:b(u)}))},G={passive:!0,capture:!0};function p(u){n({value:b(u)})}function C(u){u.stopPropagation(),u.preventDefault(),Y(u),window.removeEventListener("mousemove",p,G),window.removeEventListener("mouseup",C)}function z(u){var _;Y(u),window.removeEventListener("touchmove",p,G),(_=u.target)==null||_.removeEventListener("touchend",z)}function te(u){var _;Q(u),window.addEventListener("touchmove",p,G),(_=u.target)==null||_.addEventListener("touchend",z,{passive:!1})}function ae(u){u.preventDefault(),Q(u),window.addEventListener("mousemove",p,G),window.addEventListener("mouseup",C,{passive:!1})}const J=u=>{const _=(u-y.value)/(I.value-y.value)*100;return Te(isNaN(_)?0:_,0,100)},le=D(t,"showTicks"),he=m(()=>le.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(u=>({value:u,position:J(u),label:u.toString()})):Object.keys(t.ticks).map(u=>({value:parseFloat(u),position:J(parseFloat(u)),label:t.ticks[u]})):$.value!==1/0?Qe($.value+1).map(u=>{const _=y.value+u*g.value;return{value:_,position:J(_)}}):[]:[]),ze=m(()=>he.value.some(u=>{let{label:_}=u;return!!_})),fe={activeThumbRef:P,color:D(t,"color"),decimals:F,disabled:x,direction:D(t,"direction"),elevation:D(t,"elevation"),hasLabels:ze,horizontalDirection:v,isReversed:h,min:y,max:I,mousePressed:S,numTicks:$,onSliderMousedown:ae,onSliderTouchstart:te,parsedTicks:he,parseMouseMove:b,position:J,readonly:D(t,"readonly"),rounded:D(t,"rounded"),roundValue:E,showTicks:le,startOffset:k,step:g,thumbSize:q,thumbColor:f,thumbLabel:D(t,"thumbLabel"),ticks:D(t,"ticks"),tickSize:U,trackColor:V,trackContainerRef:M,trackFillColor:L,trackSize:A,vertical:K};return Je(ve,fe),fe},Kt=ie()({name:"VSliderThumb",directives:{Ripple:Ze},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0},...Ve()},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:i}=t;const n=Pe(ve);if(!n)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:s,step:r,vertical:o,disabled:h,thumbSize:v,thumbLabel:y,direction:I,readonly:g,elevation:F,isReversed:E,horizontalDirection:q,mousePressed:U,decimals:A}=n,{textColorClasses:$,textColorStyles:x}=et(s),{pageup:K,pagedown:f,end:V,home:L,left:S,right:k,down:M,up:P}=ot,b=[K,f,V,L,S,k,M,P],Y=m(()=>r.value?[1,2,3]:[1,5,10]);function Q(p,C){if(!b.includes(p.key))return;p.preventDefault();const z=r.value||.1,te=(e.max-e.min)/z;if([S,k,M,P].includes(p.key)){const J=(q.value==="rtl"?[S,P]:[k,P]).includes(p.key)?1:-1,le=p.shiftKey?2:p.ctrlKey?1:0;C=C+J*z*Y.value[le]}else if(p.key===L)C=e.min;else if(p.key===V)C=e.max;else{const ae=p.key===f?1:-1;C=C-ae*z*(te>100?te/10:10)}return Math.max(e.min,Math.min(e.max,C))}function G(p){const C=Q(p,e.modelValue);C!=null&&i("update:modelValue",C)}return de(()=>{const p=H(o.value||E.value?100-e.position:e.position,"%"),{elevationClasses:C}=tt(m(()=>h.value?void 0:F.value));return l("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&U.value},e.class],style:[{"--v-slider-thumb-position":p,"--v-slider-thumb-size":H(v.value)},e.style],role:"slider",tabindex:h.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":g.value,"aria-orientation":I.value,onKeydown:g.value?void 0:G},[l("div",{class:["v-slider-thumb__surface",$.value,C.value],style:{...x.value}},null),ge(l("div",{class:["v-slider-thumb__ripple",$.value],style:x.value},null),[[at("ripple"),e.ripple,null,{circle:!0,center:!0}]]),l(lt,{origin:"bottom center"},{default:()=>{var z;return[ge(l("div",{class:"v-slider-thumb__label-container"},[l("div",{class:["v-slider-thumb__label"]},[l("div",null,[((z=a["thumb-label"])==null?void 0:z.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(r.value?A.value:1)])])]),[[st,y.value&&e.focused||y.value==="always"]])]}})])}),{}}});const Gt=ie()({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0},...Ve()},emits:{},setup(e,t){let{slots:a}=t;const i=Pe(ve);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:n,horizontalDirection:s,parsedTicks:r,rounded:o,showTicks:h,tickSize:v,trackColor:y,trackFillColor:I,trackSize:g,vertical:F,min:E,max:q}=i,{roundedClasses:U}=rt(o),{backgroundColorClasses:A,backgroundColorStyles:$}=_e(I),{backgroundColorClasses:x,backgroundColorStyles:K}=_e(y),f=m(()=>`inset-${F.value?"block-end":"inline-start"}`),V=m(()=>F.value?"height":"width"),L=m(()=>({[f.value]:"0%",[V.value]:"100%"})),S=m(()=>e.stop-e.start),k=m(()=>({[f.value]:H(e.start,"%"),[V.value]:H(S.value,"%")})),M=m(()=>h.value?(F.value?r.value.slice().reverse():r.value).map((b,Y)=>{var p;const Q=F.value?"bottom":"margin-inline-start",G=b.value!==E.value&&b.value!==q.value?H(b.position,"%"):void 0;return l("div",{key:b.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":b.position>=e.start&&b.position<=e.stop,"v-slider-track__tick--first":b.value===E.value,"v-slider-track__tick--last":b.value===q.value}],style:{[Q]:G}},[(b.label||a["tick-label"])&&l("div",{class:"v-slider-track__tick-label"},[((p=a["tick-label"])==null?void 0:p.call(a,{tick:b,index:Y}))??b.label])])}):[]);return de(()=>l("div",{class:["v-slider-track",U.value,e.class],style:[{"--v-slider-track-size":H(g.value),"--v-slider-tick-size":H(v.value),direction:F.value?void 0:s.value},e.style]},[l("div",{class:["v-slider-track__background",x.value,{"v-slider-track__background--opacity":!!n.value||!I.value}],style:{...L.value,...K.value}},null),l("div",{class:["v-slider-track__fill",A.value],style:{...k.value,...$.value}},null),h.value&&l("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":h.value==="always"}]},[M.value])])),{}}}),Ht=ie()({name:"VSlider",props:{...nt(),...qt(),...ut(),modelValue:{type:[Number,String],default:0}},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:i}=t;const n=ee(),s=Ut(e),r=it(e,"modelValue",void 0,f=>{const V=typeof f=="string"?parseFloat(f):f??s.min.value;return s.roundValue(V)}),{min:o,max:h,mousePressed:v,roundValue:y,onSliderMousedown:I,onSliderTouchstart:g,trackContainerRef:F,position:E,hasLabels:q,readonly:U}=xt({props:e,steps:s,onSliderStart:()=>{i("start",r.value)},onSliderEnd:f=>{let{value:V}=f;const L=y(V);r.value=L,i("end",L)},onSliderMove:f=>{let{value:V}=f;return r.value=y(V)},getActiveThumb:()=>{var f;return(f=n.value)==null?void 0:f.$el}}),{isFocused:A,focus:$,blur:x}=dt(e),K=m(()=>E(r.value));return de(()=>{const[f,V]=ye.filterProps(e),L=!!(e.label||a.label||a.prepend);return l(ye,W({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||q.value,"v-slider--focused":A.value,"v-slider--pressed":v.value,"v-slider--disabled":e.disabled},e.class],style:e.style},f,{focused:A.value}),{...a,prepend:L?S=>{var k,M;return l(ce,null,[((k=a.label)==null?void 0:k.call(a,S))??e.label?l(ct,{id:S.id.value,class:"v-slider__label",text:e.label},null):void 0,(M=a.prepend)==null?void 0:M.call(a,S)])}:void 0,default:S=>{let{id:k,messagesId:M}=S;return l("div",{class:"v-slider__container",onMousedown:U.value?void 0:I,onTouchstartPassive:U.value?void 0:g},[l("input",{id:k.value,name:e.name||k.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:r.value},null),l(Gt,{ref:F,start:0,stop:K.value},{"tick-label":a["tick-label"]}),l(Kt,{ref:n,"aria-describedby":M.value,focused:A.value,min:o.value,max:h.value,modelValue:r.value,"onUpdate:modelValue":P=>r.value=P,position:K.value,elevation:e.elevation,onFocus:$,onBlur:x},{"thumb-label":a["thumb-label"]})])}})}),{}}}),Wt={name:"PaginationSlider"};function Xt(e,t,a,i,n,s){return c(),T(Ht,W({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),null,16)}const sl=O(Wt,[["render",Xt],["__scopeId","data-v-825b160e"]]);const Yt={name:"PaginationNavButton"};function Qt(e,t,a,i,n,s){return c(),T(se,W({class:"paginationNavButton",height:"100%"},e.$attrs),Ce({_:2},[re(e.$slots,(r,o)=>({name:o,fn:w(h=>[we(e.$slots,o,W({props:r},h),void 0,!0)])}))]),1040)}const ol=O(Yt,[["render",Qt],["__scopeId","data-v-852fad11"]]),Me=mt.browser.vuetifyNullCode,Fe="None",Jt={value:Me,title:Fe},Zt=function(e,t){let a;return e===void 0?a=e:e instanceof Object?(a={value:e.pk,title:e.name},e.pk===null||e.name===void 0?a.value=Me:t||(a.value=+e.pk),(a.title===null||a.value===void 0)&&(a.title=Fe)):e===null?a=Jt:a={value:e,title:e.toString()},a},ea=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},ta=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},aa=function(e,t,a=!1,i=!1){const n=e||[],s=t&&t.toLowerCase();let r=[];for(const h of n){const v=Zt(h,i);v&&(!s||v.title&&v.title.toLowerCase().includes(s))&&r.push(v)}const o=a?ta:ea;return r.sort(o)};const la={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function sa(e,t,a,i,n,s){return c(),T(vt,W({"aria-label":"loading",class:"codexProgressCircular",indeterminate:a.indeterminate},e.$attrs),null,16,["indeterminate"])}const Le=O(la,[["render",sa],["__scopeId","data-v-7bb4cf22"]]),oa=(e,t)=>e?`${ht(e)}/cover.webp?${t}`:window.CODEX.MISSING_COVER;const ra={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},coverPk:{type:Number,required:!0}},data(){return{showPlaceholder:!1}},computed:{...Z(X,{coverSrc:function(e){return oa(this.coverPk,e.page.coversTimestamp)}})},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},na={class:"bookCover"},ua={key:1,class:"childCount"};function ia(e,t,a,i,n,s){return c(),B("div",na,[l(ft,{src:e.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(c(),B("div",{key:0,class:me({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):N("",!0),a.group!=="c"?(c(),B("span",ua,R(a.childCount),1)):N("",!0)])}const $e=O(ra,[["render",ia],["__scopeId","data-v-9acb5f6a"]]);const da={name:"MetadataTags",props:{label:{type:String,required:!0},items:{type:Array,default(){return[]}},values:{type:Array,default(){return[]}}},data(){return{mdiFilter:pt}},computed:{...Z(X,{filterValues:function(e){return e.settings.filters[this.label.toLowerCase()]}}),model(){return aa(this.values)}},methods:{chipColor:function(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""}}},ca={key:0,class:"tags"},ma={class:"label"};function va(e,t,a,i,n,s){return s.model&&s.model.length>0?(c(),B("div",ca,[l(gt,{value:s.model,multiple:"",class:"chipGroup"},{default:w(()=>[d("div",ma,R(a.label),1),(c(!0),B(ce,null,re(s.model,r=>(c(),T(bt,{key:`${a.label}/${r.value}`,color:s.chipColor(r.value),value:r.value,text:r.title},null,8,["color","value","text"]))),128))]),_:1},8,["value"])])):N("",!0)}const De=O(da,[["render",va],["__scopeId","data-v-80903885"]]);const ha={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:Boolean,default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:_t}},computed:{computedValue(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group},pathArray(){if(this.computedValue)return this.computedValue.split("/")},folderPath(){if(this.pathArray)return this.pathArray.slice(0,-1).join("/")},basePath(){if(this.pathArray)return this.pathArray.at(-1)},groupTo(){const e=X();if(this.group!=="f"&&!e.settings.show[this.group]||this.group==="f"&&!e.page.adminFlags.folderView)return;let t;if(t=this.obj&&this.obj.group==this.group?this.obj.pk:this.value.pk,!t)return;const a=this.$router.currentRoute.value.params;if(!(a.group===this.group&&+a.pk===t))return{name:"browser",params:{group:this.group,pk:t}}}}},fa={class:"textLabel"},pa={class:"textValue"},ba=["href"],ga={key:3,class:"textContent"},_a={key:4,id:"basePath"};function ya(e,t,a,i,n,s){const r=Re("router-link");return s.computedValue?(c(),B("div",{key:0,class:me(["text",{highlight:s.highlight}])},[d("div",fa,R(a.label),1),d("div",pa,[s.groupTo&&a.group==="f"?(c(),T(r,{key:0,id:"folderPath",to:s.groupTo,title:"Browse Folder"},{default:w(()=>[j(R(s.folderPath)+"/",1)]),_:1},8,["to"])):s.groupTo?(c(),T(r,{key:1,class:"textContent",to:s.groupTo,title:`Browse ${a.label}`},{default:w(()=>[j(R(s.computedValue),1)]),_:1},8,["to","title"])):a.link?(c(),B("a",{key:2,href:s.computedValue,target:"_blank"},[j(R(s.computedValue)+" ",1),l(oe,{size:"small"},{default:w(()=>[j(R(n.mdiOpenInNew),1)]),_:1})],8,ba)):(c(),B("div",ga,R(s.computedValue),1)),s.groupTo&&a.group==="f"?(c(),B("span",_a,R(s.basePath),1)):N("",!0)])],2)):N("",!0)}const Ee=O(ha,[["render",ya],["__scopeId","data-v-7a19eb52"]]);const ka={name:"MetadatacreatorsTable",props:{value:{type:Array,default:void 0}},data(){return{}},computed:{sortedcreators:function(){return this.value?[...this.value].sort(this.creatorsCompare):[]},...Z(X,{filteredCreators(e){return e.settings.filters.creators}})},methods:{roleName:function(e){return e==="CoverArtist"?"Cover Artist":e},creatorSortable:function(e){const t=e.person.name.split(" ");let a=[];return t&&(a.push(t.slice(-1)),t.length>1&&a.push(t.slice(0,-1))),a.push(e.role.name),a.join(" ")},creatorsCompare:function(e,t){const a=this.creatorSortable(e),i=this.creatorSortable(t);return a<i?-1:a>i?1:0},isFilteredCreator(e){return this.filteredCreators&&this.filteredCreators.includes(e)}}},Ae=e=>(Be("data-v-f650684d"),e=e(),Ie(),e),Sa=Ae(()=>d("h2",null,"Credits",-1)),Ca={class:"highlight-table"},wa=Ae(()=>d("thead",null,[d("tr",null,[d("th",{class:"text-left"},"Role"),d("th",{class:"text-left"},"Person")])],-1)),Ta={class:"highlight"};function Va(e,t,a,i,n,s){return s.sortedcreators&&s.sortedcreators.length>0?(c(),T(yt,{key:0,id:"creatorsTable"},{default:w(()=>[Sa,d("table",Ca,[wa,d("tbody",null,[(c(!0),B(ce,null,re(s.sortedcreators,r=>(c(),B("tr",{key:r.pk},[d("td",null,R(s.roleName(r.role.name)),1),d("td",{class:me({filteredOn:s.isFilteredCreator(r.person.pk)})},[d("span",Ta,R(r.person.name),1)],2)]))),128))])])]),_:1})):N("",!0)}const Pa=O(ka,[["render",Va],["__scopeId","data-v-f650684d"]]),Ra=({pk:e,page:t,readLtr:a,pageCount:i})=>{if(i){if(t)t=Number(t);else if(a)t=0;else{const n=Number(i)-1;t=Math.max(n,0)}return{name:"reader",params:{pk:e,page:t}}}},Se=kt("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pk:t}){const a=X();await St.getMetadata({group:e,pk:t},a.settings).then(i=>(this.md=i.data,!0)).catch(i=>{console.error(i),this.clearMetadata()})},clearMetadata(){this.md=void 0}}});const Ba=1160,Ia=.05,Na=250,Ma={name:"MetadataButton",components:{BookCover:$e,CloseButton:Ne,MetadatacreatorsTable:Pa,MetadataTags:De,MetadataText:Ee,PlaceholderLoading:Le},props:{group:{type:String,required:!0},pk:{type:Number,required:!0},children:{type:Number,default:1}},data(){return{mdiDownload:Ct,mdiTagOutline:wt,dialog:!1,progress:0}},computed:{...Tt(Vt,["isUserAdmin"]),...Z(X,{twentyFourHourTime:e=>e.settings.twentyFourHourTime}),...Z(Se,{md:e=>e.md,downloadFileName:e=>{const t=e.md;return e.md.path?t.path.split("/").at(-1):Pt({seriesName:t.series.name,volumeName:t.volume.name,issue:t.issue,issueSuffix:t.issueSuffix})+"."+globalThis.fileType.toLowerCase()}}),...Z(X,{q:e=>e.settings.q}),downloadURL:function(){return Rt(this.pk)},isReadButtonShown:function(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled:function(){return this.$route.name==="browser"&&!!this.readerRoute},readButtonIcon:function(){return this.isReadButtonEnabled?Bt:It},readerRoute:function(){return Ra(this.md)},formattedIssue:function(){if(!((this.md.issue===null||this.md.issue===void 0)&&!this.md.issueSuffix))return Nt({issue:this.md.issue,issueSuffix:this.md.issueSuffix})},ltrText:function(){return this.md.readLtr?"Left to Right":"Right to Left"},pages:function(){let e="";if(this.md.page){const a=ue.numberFormat(this.md.page,0);e+=`Read ${a} of `}const t=ue.numberFormat(this.md.pageCount,0);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size:function(){return ue.filesize(this.md.size)},fileType:function(){return this.md.fileType||"Unknown"}},watch:{dialog:function(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...ke(Se,["clearMetadata","loadMetadata"]),...ke(Mt,["downloadIOSPWAFix"]),dialogOpened:function(){this.loadMetadata({group:this.group,pk:this.pk}),this.startProgress()},startProgress:function(){this.startTime=Date.now(),this.estimatedMS=Math.max(Ia,this.children/Ba)*1e3,this.updateProgress()},updateProgress:function(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Na)},formatDateTime:function(e){return Ft(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.md.filename)}}},Fa=e=>(Be("data-v-f9d6e29f"),e=e(),Ie(),e),La={id:"metadataHeader"},$a={id:"metadataBookCoverWrapper"},Da={class:"headerHalfRow"},Ea={class:"headerQuarterRow"},Aa={class:"mdSection"},za={key:0,class:"inlineRow"},ja={id:"metadataBody"},Oa={class:"mdSection"},qa={class:"thirdRow"},Ua={class:"mdSection"},xa={class:"quarterRow"},Ka={class:"lastSmallRow"},Ga={class:"halfRow mdSection"},Ha={class:"mdSection"},Wa={class:"mdSection"},Xa={class:"mdSection"},Ya={class:"mdSection"},Qa={id:"footerLinks"},Ja={id:"bottomRightButtons"},Za={key:1,id:"placeholderContainer"},el=Fa(()=>d("div",{id:"placeholderTitle"},"Tags Loading",-1));function tl(e,t,a,i,n,s){const r=Ne,o=Ee,h=$e,v=De,y=Re("MetadatacreatorsTable"),I=Le;return c(),T(Et,{modelValue:n.dialog,"onUpdate:modelValue":t[5]||(t[5]=g=>n.dialog=g),fullscreen:"",transition:"dialog-bottom-transition"},{activator:w(({props:g})=>[l(se,W({"aria-label":"tags",class:"tagButton cardControlButton",icon:"",title:"Tags",variant:"text"},g,{onClick:t[0]||(t[0]=Lt(()=>{},["prevent"]))}),{default:w(()=>[l(oe,null,{default:w(()=>[j(R(n.mdiTagOutline),1)]),_:1})]),_:2},1040)]),default:w(()=>[e.md?(c(),B("div",{key:0,id:"metadataContainer",onKeyup:t[3]||(t[3]=Dt(g=>n.dialog=!1,["esc"]))},[d("header",La,[l(r,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[1]||(t[1]=g=>n.dialog=!1)}),e.q?(c(),T(o,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):N("",!0),d("div",$a,[l(h,{id:"bookCover","cover-pk":e.md.coverPk,group:a.group,"child-count":e.md.childCount,finished:e.md.finished},null,8,["cover-pk","group","child-count","finished"]),l($t,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),d("div",Da,[l(o,{id:"publisher",value:e.md.publisher,group:"p",label:"Publisher",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(o,{id:"imprint",value:e.md.imprint,group:"i",label:"Imprint",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"])]),l(o,{id:"series",value:e.md.series,label:"Series",group:"s",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),d("div",Ea,[l(o,{id:"volume",value:e.md.volume,label:"Volume",group:"v",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(o,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),l(o,{id:"issue",value:s.formattedIssue,label:"Issue",group:"c",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(o,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"])]),d("section",Aa,[l(o,{value:e.md.name,label:"Title"},null,8,["value"]),e.md.year||e.md.month||e.md.day?(c(),B("div",za,[l(o,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),l(o,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),l(o,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):N("",!0),l(o,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),d("div",ja,[d("section",Oa,[d("div",qa,[l(o,{value:s.pages,label:"Pages"},null,8,["value"]),l(o,{value:e.md.finished,label:"Finished"},null,8,["value"]),l(o,{value:s.ltrText,label:"Reading Direction"},null,8,["value"])])]),d("section",Ua,[d("div",xa,[e.md.createdAt?(c(),T(o,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):N("",!0),e.md.updatedAt?(c(),T(o,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):N("",!0),l(o,{value:s.size,label:"Size"},null,8,["value"]),l(o,{value:s.fileType,label:"File Type"},null,8,["value"])]),d("div",Ka,[l(o,{group:"f",value:{pk:e.md.parentFolderPk,name:e.md.path},label:"Path"},null,8,["value"])])]),d("section",Ga,[l(o,{value:e.md.country,label:"Country"},null,8,["value"]),l(o,{value:e.md.language,label:"Language"},null,8,["value"])]),d("section",Ha,[l(o,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),l(o,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),l(o,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),d("section",Wa,[l(v,{values:e.md.genres,label:"Genres"},null,8,["values"]),l(v,{values:e.md.tags,label:"Tags"},null,8,["values"]),l(v,{values:e.md.teams,label:"Teams"},null,8,["values"]),l(v,{values:e.md.characters,label:"Characters"},null,8,["values"]),l(v,{values:e.md.locations,label:"Locations"},null,8,["values"]),l(v,{values:e.md.storyArcs,label:"Story Arcs"},null,8,["values"]),l(v,{values:e.md.seriesGroups,label:"Series Groups"},null,8,["values"])]),d("section",Xa,[l(o,{value:e.md.web,label:"Web Link",link:!0},null,8,["value"]),l(o,{value:e.md.summary,label:"Summary"},null,8,["value"]),l(o,{value:e.md.comments,label:"Comments"},null,8,["value"]),l(o,{value:e.md.notes,label:"Notes"},null,8,["value"]),l(o,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])]),d("section",Ya,[l(y,{value:e.md.creators},null,8,["value"])])]),d("footer",Qa,[a.group==="c"?(c(),T(se,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:s.download},{default:w(()=>[a.group==="c"?(c(),T(oe,{key:0},{default:w(()=>[j(R(n.mdiDownload),1)]),_:1})):N("",!0),j(" Download ")]),_:1},8,["onClick"])):N("",!0),s.isReadButtonShown?(c(),T(se,{key:1,to:s.readerRoute,title:"Read Comic",disabled:!s.isReadButtonEnabled},{default:w(()=>[l(oe,null,{default:w(()=>[j(R(s.readButtonIcon),1)]),_:1}),j(" Read ")]),_:1},8,["to","disabled"])):N("",!0),d("span",Ja,[l(r,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[2]||(t[2]=g=>n.dialog=!1)})])])],32)):(c(),B("div",Za,[l(r,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[4]||(t[4]=g=>n.dialog=!1)}),el,l(I,{"model-value":n.progress,indeterminate:n.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const rl=O(Ma,[["render",tl],["__scopeId","data-v-f9d6e29f"]]);export{Le as P,ol as _,sl as a,ll as b,rl as c,$e as d,Ra as g,aa as t};
