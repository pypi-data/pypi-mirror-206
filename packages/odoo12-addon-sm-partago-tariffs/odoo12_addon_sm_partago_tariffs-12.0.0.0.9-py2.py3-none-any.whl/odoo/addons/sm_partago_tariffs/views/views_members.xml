<odoo>
  <data>
    <record id="view_tariff_members_form" model="ir.ui.view">
      <field name="name">sm_partago_tariffs.members.form</field>
      <field name="model">res.partner</field>
      <field name="type">form</field>
      <field name="inherit_id" ref="sm_partago_user.view_smp_members_form"/>
      <field name="arch" type="xml">
        <xpath expr="//notebook" position="inside">
          <page name='tariffs' string="Tariffs">
            <group name="tariffs">
              <field name="default_tariff_model_id"/>
              <field name="cs_tariffs_id" widget="one2many_list">
                <tree string="Tariffs" create="true" edit="true" delete="true" open="true">
                  <field name="name"/>
                  <field name="date"/>
                  <field name="date_active"/>
                  <field name="date_valid"/>
                  <field name="related_carconfig_id"/>
                  <field name="pocketbook"/>
                  <field name="closed"/>
                </tree>
                <form>
                  <sheet>
                    <notebook>
                      <page string="General">
                        <group>
                          <field name="name"/>
                          <field name="reason"/>
                          <field name="tariff_model_id"/>
                          <field name="tariff_type"/>
                          <field name="date"/>
                          <field name="date_active"/>
                          <field name="date_valid" attrs="{'invisible': [('tariff_type','!=','time_frame')]}"/>
                          <field name="related_carconfig_id" attrs="{'invisible': [('tariff_type','!=','rel_car')]}"/>
                          <field name="related_tariff_group_id" attrs="{'invisible': [('tariff_type','!=','rel_car_group')]}"/>
                          <field name="time_restricted" attrs="{'invisible': [('tariff_type','!=','rel_car')]}"/>
                          <field name="carconfig_availability" attrs="{'required':[('time_restricted','=',True)], 'invisible': [('time_restricted','!=',True)]}"/>
                          <field name="extra_tariff_model_id" attrs="{'required':[('time_restricted','=',True)], 'invisible': [('time_restricted','!=',True)]}"/>
                          <field name="pocketbook_initial" attrs="{'invisible': [('tariff_type','!=','pocketbook')]}" />
                          <field name="pocketbook_threshold" attrs="{'invisible': [('tariff_type','!=','pocketbook')]}"/>
                          <field name="pocketbook" attrs="{'invisible': [('tariff_type','!=','pocketbook')]}"/>
                          <field name="description"/>
                          <field name="related_carsharing_user_request_id"/>
                          <field name="closed"/>
                          <field name="abouttoexpire"/>
                          <field name="abouttoexpire_member_notified"/>
                          <field name="tariff_history_ids" widget="one2many_list">
                            <tree string="Tariff history" create="false" edit="false" delete="true" open="true">
                              <field name="name"/>
                              <field name="date"/>
                              <field name="amount"/>
                              <field name="obs"/>
                            </tree>
                          </field>
                        </group>
                      </page>
                    </notebook>
                  </sheet>
                </form>
              </field>
            </group>
          </page>
        </xpath>
      </field>
    </record>
  </data>
</odoo>
